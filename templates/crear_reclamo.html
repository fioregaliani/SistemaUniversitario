<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crear Reclamo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</head>
<body class="bg-light d-flex flex-column align-items-center">

    <!-- Contenedor principal -->
    <div class="container mt-5 p-4 bg-white shadow rounded">
        <h3 class="mb-4">Crear Reclamo</h3>

        <!-- Formulario para enviar reclamo -->
        <form action="/crear_reclamo" method="post" onsubmit="return validarFormulario()">
            <div class="mb-3">
                <label for="texto" class="form-label">Descripción del reclamo:</label>
                <textarea id="texto" name="texto" rows="4" class="form-control"></textarea>
            </div>

            <button type="submit" class="btn btn-primary">Enviar reclamo</button>
        </form>

        <!-- Línea divisoria -->
        <hr class="my-4">

        <!-- Botón para ir a la página de bienvenida -->
        <div class="text-center">
        <button class="btn btn-secondary btn-sm" onclick="irAWelcome('{{ username }}')">Ir a la página anterior</button>
        </div>
    </div>

    <!-- Script de JavaScript para validar el formulario y el botón de volver -->
    <script>
        // Función para validar el formulario antes de enviarlo
        function validarFormulario() {
            var textoReclamo = document.getElementById("texto").value;

            // Verificar si el campo de descripción está vacío
            if (textoReclamo.trim() === "") {
                alert("Por favor, complete el campo de descripción del reclamo.");
                // Devolver false para evitar que el formulario se envíe
                return false;
            }

            // Devolver true para permitir que el formulario se envíe
            return true;
        }

        // Obtener el nombre de usuario dinámicamente, puedes ajustar esta lógica según tu aplicación
        var nombreUsuario = "{{ current_user.nombre_usuario }}" || "usuario_por_defecto";

        // Función para ir a la página de bienvenida
        function irAWelcome() {
            // Construir la URL con el nombre del usuario
            var urlBienvenida = "http://127.0.0.1:5000/welcome/" + encodeURIComponent(nombreUsuario);

            // Redirigir a la URL de bienvenida
            window.location.href = urlBienvenida;
        }

    </script>

</body>
</html>






